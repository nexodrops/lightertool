<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lighter IQ Challenge â€” 5 levels (50 Qs)</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <style>
    :root{
      --bg-main:#0e1118;
      --card-bg:#0f1620;
      --accent-cyan:#22d3ee;
      --accent-mint:#4ade80;
      --text-light:#f1f3f5;
      --text-muted:#8a8f99;
      --border:#232a32;
      --radius:14px;
      --trans:0.28s ease;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      background:var(--bg-main);
      color:var(--text-light);
      font-family:'Poppins',system-ui,Segoe UI,Arial;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:100vh;
      padding:20px;
    }
    .container{
      width:100%;
      max-width:820px;
      background:var(--card-bg);
      border-radius:var(--radius);
      overflow:hidden;
      box-shadow:0 18px 40px rgba(0,0,0,.6);
    }

    .topbar {
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding:12px 18px;
      background:linear-gradient(90deg,var(--accent-cyan),var(--accent-mint));
    }
    .brand { display:flex; gap:12px; align-items:center; }
    .brand img { height:40px; width:auto; display:block; }
    .title h1{ font-size:1.25rem; margin:0; color:#012; font-weight:700; }
    .title p{ margin:0; color:#012; font-size:0.85rem; font-weight:600; opacity:0.95; }

    .toplink a{
      display:inline-block;
      padding:8px 10px;
      border-radius:8px;
      background:rgba(1,34,41,0.06);
      color:#012;
      font-weight:700;
      text-decoration:none;
    }

    .header{
      padding:28px 22px;
      text-align:center;
      background:linear-gradient(180deg, rgba(2,34,41,0.04), transparent);
    }
    .header h1{ font-size:2rem; margin:0; color:var(--text-light); letter-spacing:0.4px; }
    .header p{ margin-top:8px; color:var(--text-muted); }

    .section{ padding:20px; display:none; }
    .section.active{ display:block; animation:fadeIn .32s var(--trans); }
    @keyframes fadeIn{ from{opacity:0;transform:translateY(8px)} to{opacity:1;transform:none} }

    .intro { text-align:center; margin-bottom:12px; }
    .intro h2{ font-size:1.4rem; margin-bottom:8px; }
    .intro p{ color:var(--text-muted); max-width:720px; margin:0 auto 18px; line-height:1.5 }

    .levels{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-bottom:14px;}
    .level-btn{
      padding:9px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);
      background:transparent;color:var(--text-light);cursor:pointer;font-weight:600;
    }
    .level-btn.sel{ background:linear-gradient(90deg,var(--accent-cyan),var(--accent-mint)); color:#012; border:none; }

    .btn{ padding:12px 30px; border-radius:12px; border:none; cursor:pointer; font-weight:700;
          background:linear-gradient(90deg,var(--accent-cyan),var(--accent-mint)); color:#012; }
    .btn.ghost{ background:transparent;border:1px solid rgba(255,255,255,0.04); color:var(--text-light); }

    .loader{ display:flex; justify-content:center; align-items:center; height:120px; }
    .loader span{ width:12px;height:12px;border-radius:50%;display:inline-block;margin:0 6px;background:var(--accent-cyan); animation:bounce .6s infinite alternate;}
    .loader span:nth-child(2){ animation-delay:.12s }
    .loader span:nth-child(3){ animation-delay:.24s }
    @keyframes bounce{ to{ transform:translateY(-12px); opacity:.6 } }

    .question-counter{ text-align:center;color:var(--text-muted); margin-bottom:12px }
    .progress-bar{ width:100%;height:10px;background:var(--border);border-radius:8px;overflow:hidden;margin-bottom:14px}
    .progress-fill{ height:100%; width:0%; background:linear-gradient(90deg,var(--accent-cyan),var(--accent-mint)); transition:width var(--trans) }

    .question-card{ background:transparent;padding:18px;border-radius:12px;border:1px solid rgba(255,255,255,0.03); margin-bottom:14px }
    .question-card h3{ font-size:1.15rem; color:var(--text-light); margin-bottom:12px }

    .options{ display:grid; gap:12px }
    .option{
      padding:12px 14px;border-radius:10px;background:#11161b;border:2px solid #1f262b;color:var(--text-light);
      cursor:pointer; transition:transform .18s ease, border-color .18s ease, background .18s ease;
      user-select:none;
    }
    .option:hover{ transform:translateY(-4px); border-color:var(--accent-mint) }
    .option.correct{ border-color:#51cf66; background:rgba(81,207,102,0.08) }
    .option.incorrect{ border-color:#f03e3e; background:rgba(240,62,62,0.06) }

    .controls{ display:flex; gap:10px; justify-content:center; margin-top:12px }

    .results{ text-align:center; padding:20px 24px }
    .results .score{ font-size:3rem; margin:10px 0; background:linear-gradient(90deg,var(--accent-cyan),var(--accent-mint)); -webkit-background-clip:text; -webkit-text-fill-color:transparent }
    .results .message{ color:var(--text-light); margin-bottom:10px }

    .footer{ padding:12px 18px; text-align:center; color:var(--text-muted); background:var(--card-bg) }

    @media(max-width:680px){
      .brand img{height:32px}
      .header h1{ font-size:1.5rem }
      .btn{ padding:10px 20px }
    }
  </style>

  <!-- libs -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="brand">
        <!-- make sure icon_glow.png is present next to this HTML file -->
        <img src="icon_glow.png" alt="Lighter logo" />
        <div class="title">
          <h1>Lighter IQ Challenge</h1>
          <p>50 questions â€” 5 levels (Beginner â†’ Expert)</p>
        </div>
      </div>
      <div class="toplink"><a href="https://app.lighter.xyz/" target="_blank" rel="noopener">Open Lighter</a></div>
    </div>

    <div class="header">
      <h1>Lighter IQ Challenge</h1>
      <p>Test your knowledge on Lighter â€” ZK rollup, matching, proofs and architecture.</p>
    </div>

    <!-- START -->
    <div id="start" class="section active">
      <div class="intro">
        <h2>Choose a level</h2>
        <p>Select a level below â€” each level contains 10 questions from public Lighter materials.</p>
      </div>

      <div class="levels" id="levels">
        <button class="level-btn sel" data-level="Beginner">Beginner</button>
        <button class="level-btn" data-level="Novice">Novice</button>
        <button class="level-btn" data-level="Intermediate">Intermediate</button>
        <button class="level-btn" data-level="Advanced">Advanced</button>
        <button class="level-btn" data-level="Expert">Expert</button>
      </div>

      <div style="text-align:center;margin-bottom:8px">
        <button id="startBtn" class="btn">Start Quiz (Beginner)</button>
      </div>
    </div>

    <!-- LOADING -->
    <div id="loading" class="section">
      <div class="loader"><span></span><span></span><span></span></div>
      <p style="text-align:center;color:var(--text-muted);margin-top:8px">Preparing questionsâ€¦</p>
    </div>

    <!-- QUIZ -->
    <div id="quiz" class="section">
      <div class="question-counter"><span id="cur">1</span> / <span id="tot">10</span></div>
      <div class="progress-bar"><div id="fill" class="progress-fill"></div></div>

      <div class="question-card">
        <h3 id="qtext">Question</h3>
        <div class="options" id="opts"></div>
      </div>

      <div class="controls">
        <button id="nextBtn" class="btn" disabled>Next</button>
        <button id="endBtn" class="btn ghost">End Early</button>
      </div>
    </div>

    <!-- RESULTS -->
    <div id="results" class="section">
      <div class="results">
        <div class="score" id="finalPct">0%</div>
        <div class="message" id="finalMsg">Message</div>

        <div style="max-width:420px;margin:10px auto">
          <canvas id="resultChart" width="420" height="320"></canvas>
        </div>

        <p style="color:var(--text-muted)">Correct: <span id="finalCorrect">0</span> | Wrong: <span id="finalWrong">0</span> | Total: <span id="finalTot">10</span></p>

        <div style="text-align:center;margin-top:12px">
          <button id="playAgain" class="btn">Play Again</button>
        </div>
      </div>
    </div>

    <div class="footer">
      Created by <a href="https://x.com/nexodrops" target="_blank" rel="noopener" style="color:var(--accent-mint);text-decoration:none;margin-left:6px;">@nexodrops</a>
    </div>
  </div>

  <script>
    // Full QUIZ: 5 levels Ã— 10 questions (50 total)
    const QUIZ = {
      "Beginner": [
        { q: "What type of system is Lighter described as on its homepage?", o: ["Centralized exchange (CEX)","A fully verifiable decentralized exchange built with custom ZK infrastructure","Peer-to-peer only exchange","Traditional broker-dealer"], c: 1 },
        { q: "On which base layer does Lighter perform final settlement and verify proofs?", o: ["Solana","Binance Smart Chain","Ethereum","Polkadot"], c: 2 },
        { q: "Which technology does Lighter use to prove correctness of operations like matching and liquidations?", o: ["Multi-sig", "Zero-knowledge (ZK) proofs", "Trusted oracle", "Manual audit"], c: 1 },
        { q: "Which phrase best describes Lighter's latency and cost goals?", o: ["High latency, high cost","Low latency and low cost","Low latency but extremely high fees","High latency, zero fees"], c: 1 },
        { q: "According to the site, what is Lighter optimized for?", o: ["Email notifications","Speed, throughput and scale","Only spot trading","Physical asset custody"], c: 1 },
        { q: "Lighter claims to process orders at roughly what scale?", o: ["A handful per minute","Tens of thousands of orders and cancels per second","One order per second","Hundreds per hour"], c: 1 },
        { q: "What kind of proofs does Lighter generate for operations?", o: ["SHA hashes only","ZK proofs of operations","No proofs","Manual signed receipts"], c: 1 },
        { q: "Which user benefit is explicitly mentioned for retail traders on the site?", o: ["Mandatory KYC only","Zero fees for retail traders","High minimum deposits","No trading for retail"], c: 1 },
        { q: "Which of these is a public resource linked from lighter.xyz?", o: ["Audit docs","Private slack only","Closed source repo","Paywalled paper"], c: 0 },
        { q: "What does Lighter inherit by building on top of Ethereum?", o: ["Ethereum security and composability","Faster finality than Ethereum","No on-chain settlement","No composability"], c: 0 }
      ],

      "Novice": [
        { q: "Which engine component is mentioned as part of Lighter's architecture?", o: ["Matching engine","Paper wallet engine","Centralized custody engine","Manual matching desk"], c: 0 },
        { q: "What does Lighter use to prevent censorship or favoritism in matching?", o: ["Manual approvals","Price-time priority with cryptographic proofs","Closed auctions only","Admin overrides"], c: 1 },
        { q: "What does the 'batch prover' in Lighter do?", o: ["Batch taxes","Bundle many transactions into a compact proof","Store user emails","Generate UI themes"], c: 1 },
        { q: "Which of these does Lighter publicly verify?", o: ["All matching and liquidations","Only deposits","Only withdrawals","Only trades above threshold"], c: 0 },
        { q: "What advantage does bundling transactions into one proof provide?", o: ["Higher gas per trade","Faster and cheaper verification on Ethereum","Slower settlement","More manual work"], c: 1 },
        { q: "Which component monitors margin and can auto-liquidate risky accounts?", o: ["Executor","Risk engine","Frontend","Marketing engine"], c: 1 },
        { q: "What role does the executor have in Lighter's flow?", o: ["Match orders manually","Batch trades and liquidations and produce proofs","Provide UX templates","Hold user funds in a bank"], c: 1 },
        { q: "Where can users deposit and withdraw according to the site?", o: ["Only off-chain","Through Ethereum with secure on-chain settlement","Only via third-party custodian","Via email request"], c: 1 },
        { q: "What is Lighter's approach to user funds and custody?", o: ["Users keep control via Ethereum settlement and withdrawal rights","Lighter holds all funds centrally forever","Funds are relocated to a bank","Funds are converted to fiat immediately"], c: 0 },
        { q: "Which team/organization is listed among Lighter's backers on the site?", o: ["Founders Fund","Random single investor only","No backers listed","Unknown VC"], c: 0 }
      ],

      "Intermediate": [
        { q: "Which of the following is part of Lighter's transaction flow as shown on site?", o: ["INCOMING_TX â†’ TX_QUEUE â†’ MATCHING_ENGINE","Manual review â†’ deposit","Only off-chain matching","Custodian approval step"], c: 0 },
        { q: "What does Lighter assert about privacy and trading data?", o: ["Exposes all private keys publicly","Keeps trading data private while verifying correctness","Publishes raw user orders on social media","Sells trading signals"], c: 1 },
        { q: "Which phrase describes Lighterâ€™s prover strategy?", o: ["Single-trade prover","Batch prover (bundles multiple txs)","No prover","Per-user prover in the browser"], c: 1 },
        { q: "What does 'verifiable' mean in Lighterâ€™s context?", o: ["Operations have cryptographic proofs verified on Ethereum","Team says it's verifiable but isn't","Only frontend is auditable","Verifiable = off-chain logs"], c: 0 },
        { q: "Why is Ethereum used as base layer for Lighter?", o: ["For proofs and final settlement security and composability","Because itâ€™s the cheapest chain","To avoid security","Because it's off-chain"], c: 0 },
        { q: "Which operations are proven cryptographically per the site?", o: ["Matching and liquidations","Only deposits","Only withdrawals","Only governance votes"], c: 0 },
        { q: "What performance grade does Lighter aim to meet?", o: ["Exchange-level speed comparable to high frequency finance","Only casual trading speed","Very slow archival speed","No specific performance target"], c: 0 },
        { q: "Which of these is repeatedly highlighted as a key value on the site?", o: ["Verifiability","Manual settlement","High centralized fees","Lack of transparency"], c: 0 },
        { q: "What benefit does Lighter advertise for high frequency traders?", o: ["Very competitive fees","Guaranteed profit","Free marketing","Fixed daily payouts"], c: 0 },
        { q: "How are proofs published/verified according to the site?", o: ["Verified publicly on Ethereum","Published on private FTP","Uploaded to email","Not published"], c: 0 }
      ],

      "Advanced": [
        { q: "Which matching priority is used by Lighter to keep trades fair?", o: ["Random priority","Price-time priority with proofs","Highest-fee-first priority","Admin-chosen priority"], c: 1 },
        { q: "What is a direct consequence of generating ZK proofs for matching and liquidation?", o: ["You can cryptographically verify correctness without trusting the operator","You lose all privacy","You must trust a central operator","No on-chain settlement possible"], c: 0 },
        { q: "What does the site claim about latency?", o: ["Millisecond latency for matching and processing","Seconds to minutes latency","No latency guarantees","Only hourly batches"], c: 0 },
        { q: "Which of these system parts does Lighter explicitly mention in diagrams/text?", o: ["RISK_ENGINE","Paper wallet manager","Manual matching desk","Fiat bank"], c: 0 },
        { q: "When Lighter bundles trades into a proof, which is true?", o: ["The proof verifies hundreds of trades at once","Each trade requires a separate on-chain tx","Bundling invalidates proofs","Bundling increases per-trade gas costs dramatically"], c: 0 },
        { q: "What ensures users have withdrawal rights even if Lighter goes offline?", o: ["Final settlement on Ethereum and on-chain proofs","Only customer support","Private insurance only","No withdrawal guarantee"], c: 0 },
        { q: "Which of these is a claimed benefit to retail traders mentioned repeatedly?", o: ["Zero fees for retail traders","Retail-only margin requirements","Retail users cannot withdraw","Retail must stake tokens"], c: 0 },
        { q: "Which public resources are linked by lighter.xyz (useful for deeper reading)?", o: ["Docs, Whitepaper, Audits","Private docs only","No docs","Only marketing PDFs"], c: 0 },
        { q: "What role do cryptographic proofs play in preventing favoritism?", o: ["They allow public verification that matching followed predefined rules","They serve as marketing only","They hide matching behavior","They replace market makers"], c: 0 },
        { q: "Which of these best summarizes Lighterâ€™s design tradeoff?", o: ["Exchange-level performance + on-chain verifiability","Purely off-chain speed without proofs","Fully centralized custody","Manual final settlement"], c: 0 }
      ],

      "Expert": [
        { q: "Which of these accurately describes Lighter's prover & execution design from the site?", o: ["Executor batches trades and a batch prover generates compact ZK proofs submitted to Ethereum","Every trade is submitted individually on-chain","Proofs are optional and local","There is no executor component"], c: 0 },
        { q: "Which statement about composability is implied by building on Ethereum?", o: ["Composability with Ethereum DeFi ecosystem","No composability","Only composable with off-chain apps","Composability requires trustless bridge"], c: 0 },
        { q: "In the architecture, what is the significance of the TX_QUEUE step?", o: ["It sequences incoming transactions before matching","It stores user passwords","It is only for logging","It is a UI widget"], c: 0 },
        { q: "What is true about insurance funds as mentioned on the site?", o: ["A risk engine monitors margin and auto-liquidates accounts, backed by insurance funds","Insurance funds are not mentioned","Insurance funds replace user collateral","Insurance funds are central bank assets"], c: 0 },
        { q: "Why are ZK proofs beneficial for matching engines at scale?", o: ["They let you prove correctness of complex operations off-chain and verify on-chain cheaply","They make everything slower and more expensive","They remove need for matching","They eliminate on-chain settlement"], c: 0 },
        { q: "Which promise is part of Lighter's security model?", o: ["Users retain guaranteed withdrawal rights with final on-chain settlement","Users lose withdrawal rights","Lighter takes custody permanently","Withdrawals are manual only"], c: 0 },
        { q: "Which of these is NOT consistent with Lighterâ€™s public claims?", o: ["All matching is manual and not proven","Matching is proven", "Final settlement on Ethereum", "Low-latency high-throughput"], c: 0 },
        { q: "Which developer resources does lighter.xyz surface for integration or inspection?", o: ["Documentation site, whitepaper, audits, testnet links","Only closed Slack","Only a blog","No developer resources"], c: 0 },
        { q: "Why would a batch prover reduce gas costs?", o: ["One compact proof can attest to many operations reducing per-operation on-chain calldata/gas","Batching increases total gas linearly per trade","Batching requires a separate on-chain tx per trade","Batching is irrelevant for gas"], c: 0 },
        { q: "Which two qualities are emphasized together as Lighter's goal?", o: ["Exchange-level speed and full on-chain transparency (verifiability)","Only low-cost with no proofs","Only privacy with no verification","Only custodial convenience"], c: 0 }
      ]
    };

    // App state
    let currentLevel = "Beginner";
    let questions = [];
    let qidx = 0;
    let correctCount = 0;

    // DOM refs
    const levelsEl = document.getElementById('levels');
    const startBtn = document.getElementById('startBtn');
    const nextBtn = document.getElementById('nextBtn');
    const endBtn = document.getElementById('endBtn');
    const playAgainBtn = document.getElementById('playAgain');

    // level selection
    levelsEl.addEventListener('click', (e)=>{
      const btn = e.target.closest('.level-btn');
      if(!btn) return;
      document.querySelectorAll('.level-btn').forEach(b=>b.classList.remove('sel'));
      btn.classList.add('sel');
      currentLevel = btn.dataset.level;
      startBtn.textContent = `Start Quiz (${currentLevel})`;
    });

    // start
    startBtn.addEventListener('click', ()=>{
      document.getElementById('start').classList.remove('active');
      document.getElementById('loading').classList.add('active');
      setTimeout(()=>{
        document.getElementById('loading').classList.remove('active');
        document.getElementById('quiz').classList.add('active');
        startLevel(currentLevel);
      }, 400);
    });

    function startLevel(level){
      questions = QUIZ[level].slice();
      qidx = 0; correctCount = 0;
      document.getElementById('tot').textContent = questions.length;
      loadQuestion();
    }

    function loadQuestion(){
      if(qidx >= questions.length) return showResults();
      const q = questions[qidx];
      document.getElementById('cur').textContent = qidx+1;
      document.getElementById('qtext').textContent = q.q;
      const opts = document.getElementById('opts');
      opts.innerHTML = '';
      q.o.forEach((optText, i)=>{
        const d = document.createElement('div');
        d.className = 'option';
        d.textContent = optText;
        d.dataset.idx = i;
        d.addEventListener('click', ()=> chooseOption(i, d));
        opts.appendChild(d);
      });
      const pct = Math.round((qidx)/questions.length*100);
      document.getElementById('fill').style.width = pct + '%';
      nextBtn.disabled = true;
    }

    function chooseOption(i, el){
      const q = questions[qidx];
      // prevent multiple clicks
      const first = document.querySelectorAll('.option')[0];
      if(first && first.style.pointerEvents === 'none') return;
      document.querySelectorAll('.option').forEach((n,j)=>{
        n.style.pointerEvents = 'none';
        if(j === q.c) n.classList.add('correct');
        else if(j === i && i !== q.c) n.classList.add('incorrect');
      });
      if(i === q.c){
        correctCount++;
        if(window.confetti) confetti({ particleCount: 80, spread: 60, origin: { y: 0.6 }, colors:[getComputedStyle(document.documentElement).getPropertyValue('--accent-cyan').trim(), getComputedStyle(document.documentElement).getPropertyValue('--accent-mint').trim(), "#ffffff"] });
      }
      nextBtn.disabled = false;
    }

    nextBtn.addEventListener('click', ()=>{
      qidx++;
      loadQuestion();
    });

    endBtn.addEventListener('click', ()=> showResults());

    function showResults(){
      document.getElementById('quiz').classList.remove('active');
      document.getElementById('results').classList.add('active');
      const total = questions.length || 10;
      const wrong = total - correctCount;
      const pct = total ? Math.round((correctCount/total)*100) : 0;
      document.getElementById('finalPct').textContent = pct + '%';
      document.getElementById('finalCorrect').textContent = correctCount;
      document.getElementById('finalWrong').textContent = wrong;
      document.getElementById('finalTot').textContent = total;
      document.getElementById('finalMsg').textContent =
        pct>=80 ? 'ðŸ† Excellent â€” you know Lighter well!' :
        pct>=60 ? 'ðŸ‘ Good job â€” nice understanding!' :
        pct>=40 ? 'ðŸ‘ Keep learning â€” you are getting there!' :
        'ðŸ’ª Keep practising â€” read docs.lighter.xyz and try again!';
      renderChart(correctCount, wrong);
    }

    // Chart
    let chartInst = null;
    function renderChart(corr, wrong){
      const ctx = document.getElementById('resultChart').getContext('2d');
      if(chartInst) chartInst.destroy();
      chartInst = new Chart(ctx, {
        type:'doughnut',
        data:{
          labels:['Correct','Wrong'],
          datasets:[{
            data:[corr, wrong],
            backgroundColor:['#51cf66','#f03e3e'],
            hoverOffset:8
          }]
        },
        options:{
          cutout:'72%',
          plugins:{ legend:{ position:'bottom', labels:{ color: getComputedStyle(document.documentElement).getPropertyValue('--text-light').trim() } } }
        }
      });
    }

    playAgainBtn.addEventListener('click', ()=>{
      document.getElementById('results').classList.remove('active');
      document.getElementById('start').classList.add('active');
      startBtn.textContent = `Start Quiz (${currentLevel})`;
    });

    // expose for debugging
    window._QUIZ = QUIZ;
  </script>
</body>
</html>
